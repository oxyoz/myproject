package me.wangolf.utils;

import java.io.File;

import android.graphics.Bitmap;
import android.os.Environment;
import android.util.Log;

public class FileUtils {

    /**
     * 保存图片到指定的目录
     *
     * @param bit
     * @param fileName 文件名
     * @return
     */
    public static String saveBitToSD(Bitmap bit, String fileName) {
        if (bit == null || bit.isRecycled())
            return "";

        File file = new File(Environment.getExternalStorageDirectory(), "/wangolf");
        File dirFile = new File(file.getAbsolutePath());
        if (!dirFile.exists()) {
            dirFile.mkdirs();
        }
        File pathFile = new File(dirFile, fileName + ".jpg");

        if (pathFile.exists()) {
            return pathFile.getAbsolutePath();
        } else {
            ImageUtils.Bitmap2File(bit, pathFile.getAbsolutePath());
            return pathFile.getAbsolutePath();
        }
    }

    /**
     * // 删除文件夹下的图片
     */
    public static void clearImage() {
        File file = new File(Environment.getExternalStorageDirectory(), "/wangolf");
        if (file.exists()) {
            String[] childFilePaths = file.list();
            if (childFilePaths.length > 0) {
                for (String childFilePath : childFilePaths) {
                    File childFile = new File(file.getAbsolutePath() + "/" + childFilePath);

                    deleteImage(childFile);
                }
            }
        }
    }

    // 删除图片
    public static void deleteImage(File file) {
        if (file.isFile()) {
            file.delete();
        }
        file.exists();
    }
}
